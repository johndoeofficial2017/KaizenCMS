@{
    Layout = null;
}
<div class="jarviswidget" data-widget-colorbutton="false"
     data-widget-editbutton="false"
     data-widget-togglebutton="false"
     data-widget-deletebutton="false"
     data-widget-fullscreenbutton="false"
     data-widget-custombutton="false"
     data-widget-collapsed="false"
     data-widget-sortable="false">
    <header class="button-header">
        <a class="btn btn-default" ng-click="SaveData();"
           ng-show="SOP10500.Status == 1 && TransactionLines.length > 0">
            <i class="glyphicon glyphicon-floppy-disk icon-large"></i><br />
            Save &amp; Close
        </a>
        <a class="btn btn-default" ng-click="UpdateData();"
           ng-show="SOP10500.Status == 2 && TransactionLines.length > 0">
            <i class="glyphicon glyphicon-floppy-disk icon-large"></i><br />
            Update &amp; Close
        </a>
        <a class="btn btn-default" ng-click="Delete();" ng-show="SOP10500.Status == 2"><i class="glyphicon glyphicon-trash"></i><br />Delete </a>
        <a class="btn btn-default" ng-click="Clear();">
            <i class="fa fa-eraser"></i><br />Clear
        </a>
        <a class="btn btn-default"><i class="glyphicon glyphicon-print"></i><br />Print </a>
        <a class="btn btn-default" ng-click="Cancel();">
            <i class="glyphicon glyphicon-remove">
            </i><br />Cancel
        </a>
    </header>
    <div class="no-border overflow">
        <div class="widget-body no-padding-bottom">
            <div class="row">
                <article class="col-md-12 col-lg-12">
                    <div class="row no-padding">
                        <form>
                            <fieldset>
                                <div class="row">
                                    <section class="col-md-12">
                                        <label class="col col-md-1 control-label">SOP Number</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input type="text" class="form-control" placeholder="Transaction No." ng-hide="SOP10500.VendorID != undefined && SOP10500.VendorID !=''"
                                                       ng-model="SOP10500.SOPNUMBE" maxlength="10" />
                                                <div ng-show="SOP10500.VendorID != undefined && SOP10500.VendorID !=''">
                                                    {{SOP10500.SOPNUMBE}}
                                                </div>
                                            </div>
                                        </div>
                                        <label class="col col-md-1 control-label">Batch</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input type="text" class="form-control"
                                                       placeholder="Batch ID" ng-model="SOP10500.BatchID" readonly />
                                                <div class="input-group-btn input-group-sm">
                                                    <a href="javascript:void(0);" ng-click="OpenkendoWindow('POP_Batch','PopUp')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                        <label class="col col-md-1 control-label">Project</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input type="text" class="form-control"
                                                       placeholder="Project Code" ng-model="SOP10500.ProjectCode" readonly />
                                                <div class="input-group-btn input-group-sm">
                                                    <a href="javascript:void(0);" ng-click="OpenkendoWindow('Pro_Co_Project','PopUp',null,'Main')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                                <div class="row">
                                    <section class="col-md-12">
                                        <label class="col col-md-1 control-label">Doc Date</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input kendo-date-picker
                                                       k-ng-model="SOP10500.DOCDATE"
                                                       k-format="'dd/MM/yyyy'"
                                                       style="width: 100%;" />
                                            </div>
                                        </div>
                                        <label class="col col-md-1 control-label">Customer</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input type="text" class="form-control"
                                                       placeholder="Customer No." ng-model="SOP10500.CUSTNMBR" readonly />
                                                <div class="input-group-btn input-group-sm">
                                                    <a href="javascript:void(0);" ng-click="OpenkendoWindow('SOP_Customer','PopUp')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                </div>
                                                <div class="input-group-btn input-group-sm" ng-show="SOP10500.CUSTNMBR != undefined && SOP10500.CUSTNMBR !=''">
                                                    <a href="javascript:void(0);" data-toggle="modal" data-target="#CustomerBillAddressDetails" class="btn btn-default"><i class="fa fa-building-o"></i></a>
                                                </div>
                                                <div class="input-group-btn input-group-sm" ng-show="SOP10500.CUSTNMBR != undefined && SOP10500.CUSTNMBR !=''">
                                                    <a href="javascript:void(0);" data-toggle="modal" data-target="#CustomerShipAddressDetails" class="btn btn-default"><i class="glyphicon glyphicon-shopping-cart"></i></a>
                                                </div>
                                                <div class="input-group-btn input-group-sm" ng-show="SOP10500.CUSTNMBR != undefined && SOP10500.CUSTNMBR !=''">
                                                    <a href="javascript:void(0);" data-toggle="modal" data-target="#CustomerDetails" class="btn btn-default"><i class="glyphicon glyphicon-cog"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                        <label class="col col-md-1 control-label">Name</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input type="text" class="form-control" placeholder="Customer Name"
                                                       ng-model="SOP10500.CUSTNAME" maxlength="100" />
                                            </div>
                                        </div>
                                    </section>
                                </div>
                                <div class="row">
                                    <section class="col-md-12">
                                        <label class="col col-md-1 control-label">Currency</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input type="text" class="form-control" placeholder="Currency"
                                                       ng-model="SOP10500.CurrencyCode"
                                                       data-bv-notempty="true" readonly
                                                       data-bv-notempty-message="The Currency is required and cannot be empty" />
                                                <div class="input-group-btn input-group-sm" ng-click="OpenkendoWindow('GL_Currency', 'SinglePopUp')" ng-hide="TransactionLines.length > 0">
                                                    <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                </div>
                                                <div class="input-group-btn input-group-sm"
                                                     ng-hide="SOP10500.CurrencyCode == MY.CurrencyCode"
                                                     ng-disabled="SOP10500.CurrencyCode == undefined || SOP10500.CurrencyCode == ''"
                                                     ng-click="OpenkendoWindow('GL_Currency', 'ExchangeTablePopUp', SOP10500.CurrencyCode, '')">
                                                    <a href="javascript:void(0);" class="btn btn-default" ng-show="SOP10500.ExchangeTableID == undefined || SOP10500.ExchangeTableID == ''">Select Table</a>
                                                    <a href="javascript:void(0);" class="btn btn-default" ng-hide="SOP10500.ExchangeTableID == undefined || SOP10500.ExchangeTableID == ''">{{SOP10500.ExchangeTableID}}</a>
                                                </div>
                                                <div class="input-group-btn input-group-sm"
                                                     ng-hide="SOP10500.CurrencyCode == MY.CurrencyCode"
                                                     ng-disabled="SOP10500.CurrencyCode == undefined || SOP10500.CurrencyCode == '' || SOP10500.ExchangeTableID == undefined || SOP10500.ExchangeTableID == ''"
                                                     ng-click="OpenExchangeRateWindow();">
                                                    <a href="javascript:void(0);" class="btn btn-default" ng-show="SOP10500.ExchangeRateID == undefined || SOP10500.ExchangeRateID == ''">Select Rate</a>
                                                    <a href="javascript:void(0);" class="btn btn-default" ng-hide="SOP10500.ExchangeRateID == undefined || SOP10500.ExchangeRateID == ''">{{SOP10500.ExchangeRate}}</a>
                                                </div>
                                            </div>
                                        </div>
                                        <label class="col col-md-1 control-label">Site</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <div class="input-group full-control">
                                                <input type="text" class="form-control"
                                                       placeholder="Site ID" ng-model="SOP10500.SiteID" readonly />
                                                <span class="input-group-btn input-group-sm" ng-click="OpenkendoWindow('INV_Site','PopUp',null,'Main')">
                                                    <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                </span>
                                            </div>
                                        </div>

                                    </section>
                                </div>
                                <div class="row">
                                    <section class="col-md-12">
                                        <label class="col col-md-1 control-label">Customer Po No.</label>
                                        <div class="form-group col-md-3 margin-bottom-5">
                                            <input type="text" class="form-control" placeholder="Customer Po No."
                                                   ng-model="SOP10500.CustomerPoNumber" maxlength="15" />
                                        </div>

                                    </section>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </article>
                <article class="col-md-12 col-lg-12">
                    <div class="no-padding">
                        <form class="form-horizontal">
                            <fieldset ng-show="IsOpenItemPanel==true">
                                <div class="form-group">
                                    <header id="tabheader" class="tabHeader">
                                        <ul class="nav nav-tabs in" id="myTab">
                                            <li class="active">
                                                <a data-toggle="tab" href="#DO_s1">Main</a>
                                            </li>

                                            <li>
                                                <a data-toggle="tab" href="#DO_s2">Details</a>
                                            </li>

                                            <li>
                                                <a data-toggle="tab" href="#DO_s3">Comment</a>
                                            </li>
                                        </ul>
                                    </header>
                                    <div class="no-padding" role="content">
                                        <div class="widget-body">
                                            <!-- content -->
                                            <div id="myTabContent" class="tab-content">
                                                <div class="tab-pane fade padding-10 no-padding-bottom active in" id="DO_s1">
                                                    <form class="smart-form">
                                                        <fieldset>
                                                            <div class="row">
                                                                <section class="col-sm-4">
                                                                    <label class="col col-md-3">Item</label>
                                                                    <div class="col-md-9">
                                                                        <div class="input-group full-control">
                                                                            <input type="text" class="form-control"
                                                                                   placeholder="Item ID" ng-model="SOP10501.ItemID" readonly />
                                                                            <div class="input-group-btn input-group-sm">
                                                                                <a href="javascript:void(0);" class="btn btn-default" ng-click="OpenkendoWindow('IV_Item','ItemCustomerPopUp',SOP10500.CUSTNMBR,'')"><i class="glyphicon glyphicon-search"></i></a>
                                                                            </div>
                                                                            <div class="input-group-btn input-group-sm" ng-show="SOP10501.LotNumber != null && SOP10501.LotNumber != '' && SOP10501.QuantityOrder > 0">
                                                                                <a href="javascript:void(0);" class="btn btn-default"
                                                                                   data-toggle="modal" data-target="#ItemFields"
                                                                                   ng-click="GetItemFields();"><i class="fa fa-arrow-right"></i></a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </section>
                                                                <section class="col-sm-8">
                                                                    <label class="col col-md-1">UFM</label>
                                                                    <div class="col-md-3">
                                                                        <div class="input-group full-control">
                                                                            <div class="input-group">
                                                                                <input type="text" class="form-control"
                                                                                       placeholder="UFM ID" ng-model="SOP10501.UFMID" readonly />
                                                                                <div class="input-group-btn input-group-sm">
                                                                                    <a href="javascript:void(0);" class="btn btn-default" ng-click="OpenkendoWindow('INV_Set_UFMGroup','UFMPopUp',SOP10501.UFMGroupID)"><i class="glyphicon glyphicon-search"></i></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <label class="col col-md-1">Quantity</label>
                                                                    <div class="col-md-3">
                                                                        <div class="input-group full-control">
                                                                            <input kendo-numeric-text-box
                                                                                   k-options="NumberFormatOptions(SOP10501.UFMID,SOP10501.DecimalDigitQuantity,true)" ng-blur="CalculatePrice()"
                                                                                   k-ng-model="SOP10501.QuantityOrder"
                                                                                   select-on-click style="width: 100%;" />
                                                                        </div>
                                                                    </div>
                                                                    <label class="col col-md-1">Canceled</label>
                                                                    <div class="col-md-3">
                                                                        <div class="input-group full-control">
                                                                            <input kendo-numeric-text-box
                                                                                   k-options="NumberFormatOptions(SOP10501.UFMID,SOP10501.DecimalDigitQuantity,true)"
                                                                                   k-ng-model="SOP10501.QuantityCancel"
                                                                                   select-on-click style="width: 100%;" />
                                                                        </div>
                                                                    </div>
                                                                </section>
                                                            </div>
                                                            <div class="row">
                                                                <section class="col-sm-4">
                                                                    <label class="col col-md-3">Item Name</label>
                                                                    <div class="col-md-9">
                                                                        <div class="input-group full-control">
                                                                            <input type="text" class="form-control"
                                                                                   placeholder="Item Name" ng-model="SOP10501.ItemName" />
                                                                        </div>
                                                                    </div>
                                                                </section>
                                                                <section class="col-sm-8">
                                                                    <label class="col col-md-1">Site</label>
                                                                    <div class="col-md-3">
                                                                        <div class="input-group full-control">
                                                                            <div class="input-group">
                                                                                <input type="text" class="form-control"
                                                                                       placeholder="Site ID" ng-model="SOP10501.SiteID" readonly />
                                                                                <span class="input-group-btn input-group-sm" ng-click="OpenkendoWindow('INV_Site','PopUp',null,'Line')">
                                                                                    <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                                                </span>
                                                                                <span class="input-group-btn input-group-sm" ng-show="SOP10501.BinTrack == true"
                                                                                      data-toggle="modal" data-target="#SiteBins" ng-click="LoadLineBins();">
                                                                                    <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-circle-arrow-right"></i></a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <label class="col col-md-1">U-Price</label>
                                                                    <div class="col-md-3">
                                                                        <div class="input-group full-control">
                                                                            <input kendo-numeric-text-box class="currency"
                                                                                   k-options="CurrencyFormatOptions(true)"
                                                                                   k-ng-model="SOP10501.UnitPrice" ng-blur="CalculatePrice()"
                                                                                   select-on-click style="width: 100%;" />
                                                                        </div>
                                                                    </div>
                                                                    <label class="col col-md-1">T-Price</label>
                                                                    <div class="col-md-3">
                                                                        <div class="input-group full-control">
                                                                            <input kendo-numeric-text-box class="currency"
                                                                                   k-options="CurrencyFormatOptions(true)"
                                                                                   k-ng-model="SOP10501.ExtendedPrice"
                                                                                   select-on-click style="width: 100%;" />
                                                                        </div>
                                                                    </div>
                                                                </section>
                                                            </div>
                                                            <div class="row">
                                                                <section class="col-sm-12">
                                                                    <label class="col col-md-1">Description</label>
                                                                    <div class="col-md-11">
                                                                        <div class="input-group full-control">
                                                                            <textarea class="form-control" rows="4" ng-model="SOP10501.ItemDescription"
                                                                                      placeholder="Item Description" />
                                                                        </div>
                                                                    </div>
                                                                </section>
                                                            </div>
                                                        </fieldset>
                                                    </form>
                                                </div>
                                                <div class="tab-pane padding-10 no-padding-bottom" id="DO_s2">
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-md-2 control-label">Ship Address</label>
                                                            <div class="col-md-4">
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control"
                                                                           placeholder="Ship Address" ng-model="SOP10501.SOP10506.ShipAddressTypeCode" readonly />
                                                                    <div class="input-group-btn input-group-sm">
                                                                        <a href="javascript:void(0);" ng-click="OpenkendoWindow('SOP_Customer','CustomerAddressPopUp',SOP10500.CUSTNMBR,'ShipLine')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                                    </div>
                                                                    <div class="input-group-btn input-group-sm" ng-show="SOP10501.SOP10506.ShipAddressTypeCode != undefined && SOP10501.SOP10506.ShipAddressTypeCode !=''">
                                                                        <a href="javascript:void(0);" data-toggle="modal" data-target="#ShipLineAddressDetails" class="btn btn-default"><i class="glyphicon glyphicon-shopping-cart"></i></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Shipping</label>
                                                            <div class="col-sm-4">
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control" placeholder="Shipping ID"
                                                                           ng-model="SOP10501.ShippingID" readonly />
                                                                    <span class="input-group-btn input-group-sm">
                                                                        <button class="btn btn-default" ng-click="OpenkendoWindow('SOP_Set_Shipping','PopUp',null,'Line')"><span class="glyphicon glyphicon-search"></span></button>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <label class="col-sm-2 control-label">Project</label>
                                                            <div class="col-sm-4">
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control" placeholder="Project Code" ng-model="SOP10501.ProjectCode" readonly />
                                                                    <span class="input-group-btn input-group-sm">
                                                                        <button class="btn btn-default" ng-click="OpenkendoWindow('Pro_Co_Project','PopUp',null,'Line')"><span class="glyphicon glyphicon-search"></span></button>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Trade Discount</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-numeric-text-box class="currency"
                                                                       k-options="CurrencyFormatOptions(true)"
                                                                       k-ng-model="SOP10501.TradeDiscount"
                                                                       select-on-click style="width: 100%;" />
                                                            </div>
                                                            <label class="col-sm-2 control-label">Required Ship Date</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-date-picker
                                                                       k-ng-model="SOP10501.ReqShipDate"
                                                                       k-format="'dd/MM/yyyy'"
                                                                       style="width: 100%;" />
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Commission</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-numeric-text-box class="currency"
                                                                       k-options="CurrencyFormatOptions(true)"
                                                                       k-ng-model="SOP10501.Commission"
                                                                       select-on-click style="width: 100%;" />
                                                            </div>
                                                            <label class="col-sm-2 control-label">Ship Date</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-date-picker
                                                                       k-ng-model="SOP10501.ShipDate"
                                                                       k-format="'dd/MM/yyyy'"
                                                                       style="width: 100%;" />
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Freight</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-numeric-text-box class="currency"
                                                                       k-options="CurrencyFormatOptions(true)"
                                                                       k-ng-model="SOP10501.Freight"
                                                                       select-on-click style="width: 100%;" />
                                                            </div>
                                                            <label class="col-sm-2 control-label">Generic Description</label>
                                                            <div class="col-sm-4">
                                                                <input type="text" class="form-control" placeholder="Generic Description"
                                                                       ng-model="SOP10501.GenericDescription" />
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Markdown</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-numeric-text-box class="currency"
                                                                       k-options="CurrencyFormatOptions(true)"
                                                                       k-ng-model="SOP10501.Markdown"
                                                                       select-on-click style="width: 100%;" />
                                                            </div>
                                                            <label class="col-sm-2 control-label">Short Description</label>
                                                            <div class="col-sm-4">
                                                                <input type="text" class="form-control" placeholder="Short Description"
                                                                       ng-model="SOP10501.ShortDescription" />
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Tax Amount</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-numeric-text-box class="currency"
                                                                       k-options="CurrencyFormatOptions(true)"
                                                                       k-ng-model="SOP10501.TaxAMT"
                                                                       select-on-click style="width: 100%;" />
                                                            </div>
                                                            <label class="col-sm-2 control-label">Miscellaneous</label>
                                                            <div class="col-sm-4">
                                                                <input kendo-numeric-text-box class="currency"
                                                                       k-options="CurrencyFormatOptions(true)"
                                                                       k-ng-model="SOP10501.Miscellaneous"
                                                                       select-on-click style="width: 100%;" />
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Salesperson</label>
                                                            <div class="col-sm-4">
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control"
                                                                           placeholder="Salesperson ID" ng-model="SOP10501.SalePersonID" readonly />
                                                                    <div class="input-group-btn input-group-sm">
                                                                        <a href="javascript:void(0);" ng-click="OpenkendoWindow('SOP_SalePerson','PopUp',null,'Line')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <label class="col-sm-2 control-label">Territory</label>
                                                            <div class="col-sm-4">
                                                                <select class="form-control" ng-model="SOP10501.Territory">
                                                                    <option ng-repeat="territory in Territories" value="{{territory.Territory}}">{{territory.TerritoryName}}</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                </div>
                                                <div class="tab-pane padding-10 no-padding-bottom" id="DO_s3">
                                                    <fieldset>
                                                        <div class="form-group">
                                                            <textarea kendo-editor k-ng-model="SOP10501.LineDescription"></textarea>
                                                        </div>
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <footer class="form-actions no-margin-top">
                                        <fieldset class="padding-left-30">
                                            <a href="javascript:void(0);" class="btn btn-primary"
                                               ng-click="AddNewLine();"
                                               ng-show="(SOP10501.status == 0 || SOP10501.status == 1) && ShowActions()">
                                                <i class="glyphicon glyphicon-floppy-disk"></i> Add Item
                                            </a>
                                            <a href="javascript:void(0);" class="btn btn-primary" ng-click="UpdateLine();"
                                               ng-show="SOP10501.status == 2 && ShowActions()">
                                                <i class="glyphicon glyphicon-edit"></i> Update Item
                                            </a>
                                            <a href="javascript:void(0);" class="btn btn-default"
                                               ng-click="OpenItemPanel(false)">
                                                <i class="glyphicon glyphicon-remove-circle"></i> Cancel
                                            </a>
                                        </fieldset>
                                    </footer>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </article>
                <article class="col-md-12 col-lg-12"
                         ng-show="SOP10500.CUSTNMBR != undefined && SOP10500.CUSTNMBR !='' &&
						 SOP10500.SiteID != undefined && SOP10500.SiteID !='' &&
						 SOP10500.ExchangeTableID != undefined && SOP10500.ExchangeTableID !='' &&
						 SOP10500.SOPNUMBE != undefined && SOP10500.SOPNUMBE !=''">
                    <div class="row">
                        <button class="btn btn-primary"
                                ng-click="OpenItemPanel(true)" ng-show="IsOpenItemPanel==false">
                            Add
                        </button>
                        <div class="panel panel-default">
                            <table class="table table-bordered table-responsive" ng-show="TransactionLines.length > 0">
                                <thead>
                                    <tr>
                                        <th class="text-align-center">Photo</th>
                                        <th class="text-align-center">Code</th>
                                        <th class="text-align-center">Item</th>
                                        <th class="text-align-center">Site</th>
                                        <th class="text-align-center">UFM</th>
                                        <th class="text-align-center">QTY</th>
                                        <th class="text-align-center">Unit Price</th>
                                        <th class="text-align-center">Extended Price</th>
                                        <th class="text-align-center">Edit</th>
                                        <th class="text-align-center">Delete</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="line in TransactionLines" ng-class="{'deleted':line.status== 3}">
                                        <td class="col-md-1 text-align-center">
                                            <img alt='' ng-src='{{line.IV00100link}}' style='width:40px;height:35px;cursor:pointer' />
                                        </td>
                                        <td class="col-md-1 text-align-center">{{line.ItemID}}</td>
                                        <td class="col-md-4 text-align-center">{{line.ItemName}}</td>
                                        <td class="col-md-1 text-align-center">{{line.SiteID}}</td>
                                        <td class="col-md-1 text-align-center">{{line.UFMID}}</td>
                                        <td class="col-md-1 text-align-center">
                                            <input kendo-numeric-text-box
                                                   k-options="NumberFormatOptions('',line.DecimalDigitQuantity,false)"
                                                   k-ng-model="line.QuantityOrder" readonly style="width: 100%;" />
                                        </td>
                                        <td class="col-md-1 text-align-center">
                                            <input kendo-numeric-text-box class="currency"
                                                   k-options="NumberFormatOptions('',SOP10500.DecimalDigit,false)"
                                                   k-ng-model="line.UnitPrice" readonly style="width: 100%;" />
                                        </td>
                                        <td class="col-md-1 text-align-center">
                                            <input kendo-numeric-text-box class="currency"
                                                   k-options="NumberFormatOptions('',SOP10500.DecimalDigit,false)"
                                                   k-ng-model="line.ExtendedPrice" readonly style="width: 100%;" />
                                        </td>
                                        <td class="text-align-center col-md-1" style="font-size:20px;">
                                            <a href="" ng-click="EditLine(line)"><span class="glyphicon glyphicon-edit myhover"></span></a>
                                        </td>
                                        <td class="text-align-center col-md-1" style="font-size:20px;">
                                            <a href="" ng-click="RemoveLine(line,$index)"><span class="glyphicon glyphicon-remove myhover"></span></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </article>
                <article class="col-md-12 col-lg-12" ng-show="TransactionLines.length > 0">
                    <div class="row">
                        <form class="smart-form">
                            <fieldset>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Markdown</label>
                                    <div class="col-sm-4">
                                        <input kendo-numeric-text-box class="currency"
                                               k-options="CurrencyFormatOptions(true)"
                                               k-ng-model="SOP10500.Markdown" style="width: 80%;" />
                                    </div>
                                    <label class="col-sm-2 control-label">Document Amount</label>
                                    <div class="col-sm-4">
                                        <input kendo-numeric-text-box class="currency"
                                               k-options="CurrencyFormatOptions(false)"
                                               k-ng-model="SOP10500.DOCAMNT" readonly style="width: 80%;" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Freight</label>
                                    <div class="col-sm-4">
                                        <input kendo-numeric-text-box class="currency"
                                               k-options="CurrencyFormatOptions(true)"
                                               k-ng-model="SOP10500.Freight" style="width: 80%;" />
                                    </div>
                                    <label class="col-sm-2 control-label">Trade Discount</label>
                                    <div class="col-sm-4">
                                        <input kendo-numeric-text-box class="currency"
                                               k-options="CurrencyFormatOptions(true)"
                                               k-ng-model="SOP10500.TradeDiscount" style="width: 80%;" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Miscellaneous</label>
                                    <div class="col-sm-4">
                                        <input kendo-numeric-text-box class="currency"
                                               k-options="CurrencyFormatOptions(true)"
                                               k-ng-model="SOP10500.Miscellaneous" style="width: 80%;" />
                                    </div>
                                    <label class="col-sm-2 control-label">Tax Amount</label>
                                    <div class="col-sm-4">
                                        <input kendo-numeric-text-box
                                               k-options="NumberFormatOptions(SOP10500.CurrencyCode,SOP10500.DecimalDigit,true)"
                                               k-ng-model="SOP10500.TaxAMT" style="width: 80%;" />
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </article>


                <div class="modal fade" data-backdrop="static" id="CustomerDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Customer Details</h4>
                            </div>
                            <div class="modal-body">
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Payment Term</label>
                                    </div>
                                    <div class="col-md-4">
                                        <select class="form-control" ng-model="SOP10500.PaymentTermID">
                                            <option ng-repeat="term in PaymentTerms" value="{{term.PaymentTermID}}">{{term.PaymentTermName}}</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Territory</label>
                                    </div>
                                    <div class="col-md-4">
                                        <select class="form-control" ng-model="SOP10500.Territory">
                                            <option ng-repeat="territory in Territories" value="{{territory.Territory}}">{{territory.TerritoryName}}</option>
                                        </select>
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Request Ship Date</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input kendo-date-picker
                                               k-ng-model="SOP10500.ReqShipDate"
                                               k-format="'dd/MM/yyyy'"
                                               style="width: 100%;" />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Ship Date</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input kendo-date-picker
                                               k-ng-model="SOP10500.ShipDate"
                                               k-format="'dd/MM/yyyy'"
                                               style="width: 100%;" />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Salesperson</label>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <input type="text" class="form-control"
                                                   placeholder="Salesperson ID" ng-model="SOP10500.SalePersonID" readonly />
                                            <div class="input-group-btn input-group-sm">
                                                <a href="javascript:void(0);" ng-click="OpenkendoWindow('SOP_SalePerson','PopUp',null,'Main')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    <label class="col-md-2 control-label">Price Level</label>
                                    <div class="col-md-4">
                                        <select kendo-drop-down-list
                                                k-filter="'startswith'"
                                                k-ng-model="SOP10500.PriceLevelCode"
                                                k-data-text-field="'PriceLevelName'"
                                                k-value-primitive="true"
                                                k-data-value-field="'PriceLevelCode'"
                                                k-data-source="PriceLevels"
                                                style="width: 100%"></select>
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-12">
                                        <textarea class="form-control" 
                                                  placeholder="Transaction Comments"
                                                  ng-model="SOP10500.TrxComments" 
                                                  rows="4"></textarea>
                                    </div>
                                </fieldset>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary"
                                        data-dismiss="modal">
                                    Ok
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>
                <div class="modal fade" data-backdrop="static" id="CustomerBillAddressDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Customer Bill Address Details</h4>
                            </div>
                            <div class="modal-body">
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Customer Bill Address</label>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <input type="text" class="form-control"
                                                   placeholder="Customer Address" ng-model="SOP10500.BillAddressTypeCode" readonly />
                                            <div class="input-group-btn input-group-sm">
                                                <a href="javascript:void(0);" ng-click="OpenkendoWindow('SOP_Customer','CustomerAddressPopUp',SOP10500.CUSTNMBR,'Bill')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Address Name</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Address Name" ng-model="SOP10500.BillAddressName" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Address 1</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Address 1" ng-model="SOP10500.Address1" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Phone 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Phone 01" ng-model="SOP10500.Pnone01" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Phone 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Phone 02" ng-model="SOP10500.Pnone02" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Mobile No. 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Mobile No. 01" ng-model="SOP10500.MobileNo1" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Mobile No. 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Mobile No. 02" ng-model="SOP10500.MobileNo2" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Other 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Other 01" ng-model="SOP10500.Other01" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Other 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Other 02" ng-model="SOP10500.Other02" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Email 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Email 01" ng-model="SOP10500.Email01" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Email 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Email 02" ng-model="SOP10500.Email02" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">PO Box</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="PO Box" ng-model="SOP10500.POBox" readonly />
                                    </div>
                                </fieldset>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary"
                                        data-dismiss="modal">
                                    Ok
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>
                <div class="modal fade" data-backdrop="static" id="CustomerShipAddressDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Customer Ship Address Details</h4>
                            </div>
                            <div class="modal-body">
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Customer Ship Address</label>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <input type="text" class="form-control"
                                                   placeholder="Customer Address" ng-model="SOP10500.ShipAddressCode" readonly />
                                            <div class="input-group-btn input-group-sm">
                                                <a href="javascript:void(0);" ng-click="OpenkendoWindow('SOP_Customer','CustomerAddressPopUp',SOP10500.CUSTNMBR,'Ship')" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Address Name</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Address Name" ng-model="SOP10500.ShipAddressName" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Address 1</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Address 1" ng-model="SOP10500.ShipAddress1" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Address 2</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Address 2" ng-model="SOP10500.ShipAddress2" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Phone 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Phone 01" ng-model="SOP10500.ShipPnone01" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Phone 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Phone 02" ng-model="SOP10500.ShipPnone02" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Mobile No. 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Mobile No. 01" ng-model="SOP10500.ShipMobileNo1" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Mobile No. 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Mobile No. 02" ng-model="SOP10500.ShipMobileNo2" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Other 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Other 01" ng-model="SOP10500.ShipOther01" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Other 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Other 02" ng-model="SOP10500.ShipOther02" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Email 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Email 01" ng-model="SOP10500.ShipEmail01" readonly />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Email 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Email 02" ng-model="SOP10500.ShipEmail02" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">PO Box</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="PO Box" ng-model="SOP10500.ShipPOBox" readonly />
                                    </div>
                                </fieldset>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary"
                                        data-dismiss="modal">
                                    Ok
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>
                <div class="modal fade" data-backdrop="static" id="ShipLineAddressDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Shipping Address Details</h4>
                            </div>
                            <div class="modal-body">
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Address Name</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Address Name" ng-model="SOP10501.SOP10506.ShipAddressName" />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Address 1</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Address 1" ng-model="SOP10501.SOP10506.Address1" />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Phone 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Phone 01" ng-model="SOP10501.SOP10506.Pnone01" />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Phone 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Phone 02" ng-model="SOP10501.SOP10506.Pnone02" />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Mobile No. 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Mobile No. 01" ng-model="SOP10501.SOP10506.MobileNo1" />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Mobile No. 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Mobile No. 02" ng-model="SOP10501.SOP10506.MobileNo2" />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Other 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Other 01" ng-model="SOP10501.SOP10506.Other01" />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Other 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Other 02" ng-model="SOP10501.SOP10506.Other02" />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Email 01</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Email 01" ng-model="SOP10501.SOP10506.Email01" />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Email 02</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="Email 02" ng-model="SOP10501.SOP10506.Email02" />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">PO Box</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"
                                               placeholder="PO Box" ng-model="SOP10501.SOP10506.POBox" readonly />
                                    </div>
                                </fieldset>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary"
                                        data-dismiss="modal">
                                    Ok
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>

                <div class="modal fade" data-backdrop="static" id="ItemFields" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Item Management</h4>
                            </div>
                            <div class="modal-body">
                                <fieldset>
                                    <div class="col-md-6">
                                        <div class="col-md-4">
                                            <label class="control-label">Lot Line</label>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="input-group">
                                                <input type="text" class="form-control"
                                                       placeholder="Lot Line" ng-model="SOP10502.LOTLineCode" readonly />
                                                <span class="input-group-btn input-group-sm" ng-click="OpenkendoWindow('IV_Trx_Adjust','LotLinePopUp',SOP10501)">
                                                    <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="col-md-4">
                                            <label class="control-label">Lot No.</label>
                                        </div>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control"
                                                   placeholder="Lot Line" ng-model="SOP10502.LotNumber" readonly />
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset ng-show="SOP10501.IsExpiryDate">
                                    <div class="row">
                                        <div class="well well-sm well-primary">
                                            <form class="form form-inline " role="form">
                                                <fieldset>
                                                    <div class="form-group">
                                                        <label class="sr-only" for="Quantity">Expiry Date</label>
                                                        <input kendo-date-picker
                                                               k-ng-model="SOP10501.ExpiryDate"
                                                               k-format="'dd/MM/yyyy'"
                                                               style="width: 100%;" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="sr-only" for="BarCode">Barcode</label>
                                                        <input type="text" class="form-control"
                                                               placeholder="Barcode" ng-model="SOP10501.BarCode" />
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="row">
                                        <div class="well well-sm well-primary">
                                            <form class="form form-inline " role="form">
                                                <fieldset>
                                                    <div class="form-group">
                                                        <label class="sr-only" for="Quantity">Quantity</label>
                                                        <input kendo-numeric-text-box
                                                               k-options="NumberFormatOptions('',SOP10501.DecimalDigitQuantity,false)"
                                                               k-ng-model="SOP10501.QuantityBalance" disabled style="width: 100%;" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="sr-only" for="AppliedQuantity">Applied Quantity</label>
                                                        <input kendo-numeric-text-box
                                                               k-options="NumberFormatOptions('',SOP10501.DecimalDigitQuantity,false)"
                                                               ng-disabled="SOP10501.QuantityBalance == 0"
                                                               k-ng-model="SOP10501.AppliedQuantity" style="width: 100%;" />
                                                    </div>
                                                    <button type="button" class="btn btn-success btn-sm" ng-click="AddLotField();"
                                                            ng-disabled="SOP10501.QuantityBalance - SOP10501.AppliedQuantity < 0 || SOP10501.QuantityBalance <= 0">
                                                        <span class="glyphicon glyphicon-plus-sign"></span> Add
                                                    </button>
                                                </fieldset>
                                            </form>
                                        </div>
                                    </div>
                                </fieldset>
                                <div class="row">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Lot Line</th>
                                                    <th>BarCode</th>
                                                    <th>Quantity</th>
                                                    <th>Expired Date</th>
                                                    <th>Delete</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="row in SOP10501.SOP10502">
                                                    <td>{{row.LOTLineCode}}</td>
                                                    <td>{{row.BarCode}}</td>
                                                    <td>{{row.AppliedQuantity}}</td>
                                                    <td>{{row.ExpiryDate | date:'dd/MM/yyyy'}}</td>
                                                    <td class="text-align-center col-md-1" style="font-size:20px;">
                                                        <a href="" ng-click="RemoveRow(row,$index)"><span class="glyphicon glyphicon-remove myhover"></span></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">
                                    Cancel
                                </button>
                                <button type="button" class="btn btn-primary"
                                        ng-disabled="SOP10501.QuantityBalance > 0"
                                        data-dismiss="modal">
                                    Apply
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>
                <div class="modal fade" data-backdrop="static" id="SiteBins" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Site Bin Management</h4>
                            </div>
                            <div class="modal-body">
                                <fieldset>
                                    <div class="col-md-6">
                                        <div class="col-md-4">
                                            <label class="control-label">Bin Line</label>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="input-group">
                                                <input type="text" class="form-control"
                                                       placeholder="Bin Line" ng-model="SOP10504.BinID" readonly />
                                                <span class="input-group-btn input-group-sm" ng-click="OpenkendoWindow('IV_Trx_Adjust','BinLinePopUp',SOP10501)">
                                                    <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6" ng-show="SOP10504.IsBinGroup">
                                        <div class="col-md-4">
                                            <label class="control-label">Sub Bin</label>
                                        </div>
                                        <div class="col-md-8">
                                            <select class="form-control" ng-model="SOP10504.SubBinID" ng-change="SubBinChanged()">
                                                <option value="{{bin.SubBinID}}" ng-repeat="bin in SiteSubBins">{{bin.SubBinName}}</option>
                                            </select>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="row">
                                        <div class="well well-sm well-primary">
                                            <form class="form form-inline " role="form">
                                                <fieldset>
                                                    <div class="form-group">
                                                        <label class="sr-only" for="Quantity">Quantity</label>
                                                        <input kendo-numeric-text-box
                                                               k-options="NumberFormatOptions(SOP10501.UFMID,SOP10501.DecimalDigitQuantity,true)"
                                                               k-ng-model="SOP10504.QuantityBalance" readonly style="width: 100%;" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="sr-only" for="AppliedQuantity">Applied Quantity</label>
                                                        <input kendo-numeric-text-box
                                                               k-options="NumberFormatOptions(SOP10501.UFMID,SOP10501.DecimalDigitQuantity,true)"
                                                               ng-disabled="SOP10504.QuantityBalance == 0"
                                                               k-ng-model="SOP10504.AppliedQuantity" style="width: 100%;" />
                                                    </div>
                                                    <button type="button" class="btn btn-success btn-sm" ng-click="AddLineBin();"
                                                            ng-disabled="SOP10504.QuantityBalance - SOP10504.AppliedQuantity < 0 || SOP10504.QuantityBalance <= 0">
                                                        <span class="glyphicon glyphicon-plus-sign"></span> Add
                                                    </button>
                                                </fieldset>
                                            </form>
                                        </div>
                                    </div>
                                </fieldset>
                                <div class="row">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Bin</th>
                                                    <th>Quantity</th>
                                                    <th>Delete</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="row in SOP10505">
                                                    <td>{{row.BinID}}</td>
                                                    <td>{{row.ItemQuantity}}</td>
                                                    <td class="text-align-center col-md-1" style="font-size:20px;">
                                                        <a href="" ng-click="RemoveLineBin(row,$index)"><span class="glyphicon glyphicon-remove myhover"></span></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">
                                    Cancel
                                </button>
                                <button type="button" class="btn btn-primary"
                                        ng-disabled="SOP10504.QuantityBalance > 0"
                                        data-dismiss="modal">
                                    Apply
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>
                <div class="modal fade" data-backdrop="static" id="AccountDistribution" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Distribution</h4>
                            </div>
                            <div class="modal-body">
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Account</label>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <input type="text" kendo-masked-text-box class="form-control" placeholder="Account No."
                                                   ng-model="POP10605.ACTNUMBR" k-mask="'{{MY.GLFormat}}'" readonly />
                                            <div class="input-group-btn input-group-sm" ng-click="OpenkendoWindow('GL_GL','PopUp')">
                                                <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Account Name</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input class="form-control" placeholder="Account Name"
                                               ng-model="POP10605.AccountName" readonly />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Source</label>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="Source Line"
                                                   ng-model="POP10605.SourceID" readonly />
                                            <div class="input-group-btn input-group-sm" ng-click="OpenkendoWindow('GL_Set_SourceTable','PopUp')">
                                                <a href="javascript:void(0);" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Debit Amount</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input kendo-numeric-text-box
                                               k-options="NumberFormatOptions(SOP10500.CurrencyCode,SOP10500.DecimalDigit,true)"
                                               ng-blur="DisableCredit(POP10605)" ng-disabled="POP10605.DebitDisabled"
                                               k-ng-model="POP10605.DEBITAMT" style="width: 100%;" />
                                    </div>
                                    <div class="col-md-2">
                                        <label class="control-label">Credit Amount</label>
                                    </div>
                                    <div class="col-md-4">
                                        <input kendo-numeric-text-box
                                               k-options="NumberFormatOptions(SOP10500.CurrencyCode,SOP10500.DecimalDigit,true)"
                                               ng-blur="DisableDebit(POP10605)" ng-disabled="POP10605.CreditDisabled"
                                               k-ng-model="POP10605.CRDTAMNT" style="width: 100%;" />
                                    </div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <div class="col-md-2">
                                        <label class="control-label">Line Reference</label>
                                    </div>
                                    <div class="col-md-10">
                                        <input type="text" class="form-control" placeholder="Line Reference"
                                               ng-model="POP10605.LineReference" />
                                    </div>
                                </fieldset>
                                <div class="form-actions">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button class="btn btn-primary" ng-click="AddNewAccount()"><i class="fa fa-plus-square"></i> Add Account</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="table-responsive">
                                        <table id="user" class="table table-bordered table-centered"
                                               ng-show="AccountLines.length > 0" style="clear: both">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Account</th>
                                                    <th>Debit Amount</th>
                                                    <th>Credit Amount</th>
                                                    <th>Delete</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat-start="line in AccountLines">
                                                    <td>
                                                        <button class="btn btn-info btn-circle" ng-if="line.expanded" ng-click="line.expanded = false">
                                                            <span class="glyphicon glyphicon-minus-sign"></span>
                                                        </button>
                                                        <button class="btn btn-info btn-circle" ng-if="!line.expanded" ng-click="line.expanded = true">
                                                            <span class="glyphicon glyphicon-plus-sign"></span>
                                                        </button>
                                                    </td>
                                                    <td>{{line.ACTNUMBR}}</td>
                                                    <td>{{line.DEBITAMT | number : SOP10500.DecimalDigit}}</td>
                                                    <td>{{line.CRDTAMNT | number : SOP10500.DecimalDigit}}</td>
                                                    <td>
                                                        <a href="" class="btn btn-danger" ng-click="RemoveAccountLine(line,$index)">
                                                            <span class="glyphicon glyphicon-remove"></span>
                                                        </a>
                                                    </td>
                                                </tr>
                                                <tr ng-if="line.expanded" ng-repeat-end="">
                                                    <td class="container-fluid" colspan="5">
                                                        <fieldset class="form-group">
                                                            <label class="col-sm-2 control-label">Account Name</label>
                                                            <div class="col-sm-10">
                                                                <input class="form-control" placeholder="Account Name"
                                                                       ng-model="line.AccountName" readonly />
                                                            </div>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <label class="col-sm-2 control-label">Line Reference</label>
                                                            <div class="col-sm-10">
                                                                <input class="form-control" placeholder="Line Reference"
                                                                       ng-model="line.LineReference" readonly />
                                                            </div>
                                                        </fieldset>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td class="text-success bold">
                                                        {{POP10605.Total_Debit | number : SOP10500.DecimalDigit}}
                                                    </td>
                                                    <td class="text-success bold">
                                                        {{POP10605.Total_Credit | number : SOP10500.DecimalDigit}}
                                                    </td>
                                                    <td></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">
                                    Cancel
                                </button>
                                <button type="button" class="btn btn-primary"
                                        ng-disabled="POP10605.Total_Debit != POP10605.Total_Credit"
                                        data-dismiss="modal">
                                    Apply
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>
                <div class="modal fade" data-backdrop="static" id="POPayments" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                    ×
                                </button>
                                <h4 class="modal-title" id="myModalLabel">PO Payments</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="table-responsive">
                                        <table id="user" class="table table-bordered table-centered"
                                               ng-show="VendorPayments.length > 0" style="clear: both">
                                            <thead>
                                                <tr>
                                                    <th class="col-sm-2 smart-form">
                                                        <div class="checkbox text-center">
                                                            <label>
                                                                <input type="checkbox" name="checkbox" checkbox-all="VendorPayments.isSelected" />
                                                                <i></i>
                                                            </label>
                                                        </div>
                                                    </th>
                                                    <th>Payment No.</th>
                                                    <th>Document No.</th>
                                                    <th>Document Amount</th>
                                                    <th>Document Date</th>
                                                    <th>Applied Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="line in VendorPayments">
                                                    <td class="col-sm-2 col-md-2 smart-form">
                                                        <div class="checkbox text-center">
                                                            <label>
                                                                <input type="checkbox" name="checkbox" ng-model="line.isSelected"
                                                                       ng-change="SelectedChanged(line)" />
                                                                <i></i>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td>{{line.PAYNUMBE}}</td>
                                                    <td>{{line.DocumentNumber}}</td>
                                                    <td>{{line.DOCAMNT | number : line.DecimalDigit}}</td>
                                                    <td>{{line.DOCDATE | date : 'dd/MM/yyyy'}}</td>
                                                    <td>
                                                        <input kendo-numeric-text-box
                                                               k-options="NumberFormatOptions(SOP10500.CurrencyCode,SOP10500.DecimalDigit,true)"
                                                               ng-blur="AppliedAMTChanged(line,$index)" ng-disabled="!line.isSelected"
                                                               k-ng-model="line.AppliedAMT" style="width: 100%;" />
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="3">Remaining : {{SOP10500.DOCAMNT - SOP10500.TotalAppliedPOPayments | number : SOP10500.DecimalDigit }} Of {{SOP10500.DOCAMNT | number : SOP10500.DecimalDigit }}</td>
                                                    <td class="text-success bold">
                                                        {{SOP10500.TotalVendorPayments | number : SOP10500.DecimalDigit}}
                                                    </td>
                                                    <td></td>
                                                    <td class="text-success bold">
                                                        {{SOP10500.TotalAppliedPOPayments | number : SOP10500.DecimalDigit}}
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">
                                    Cancel
                                </button>
                                <button type="button" class="btn btn-primary"
                                        ng-click="SavePaymentLink();"
                                        ng-disabled="SOP10500.DOCAMNT < SOP10500.TotalAppliedPOPayments"
                                        data-dismiss="modal">
                                    Apply Link
                                </button>
                            </div>
                        </div>
                    </div><!-- /.modal-dialog -->
                </div>
            </div>
        </div>
    </div>
</div>