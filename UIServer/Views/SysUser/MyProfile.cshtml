@{
    Layout = null;
}
<script>
    function ProfileImage_onSuccess(e) {
        var responseTxt = jQuery.parseJSON(e.XMLHttpRequest.responseText);
        var scope = angular.element(document.getElementById("widget-SysProfile")).scope();
        if (responseTxt == "1") {/// remove
            scope.$apply(function () {
                scope.RemoveUserPhotoExtension(responseTxt);
            });
        } else {
            scope.$apply(function () {
                scope.SetUserPhotoExtension(responseTxt);
            });
        }
    }
</script>

<div class="container" ng-controller="SysUserController" 
     id="widget-SysProfile" ng-init="GetMyProfile()">
    <div class="row">
        <div class="col-sm-3">
            <div class="row">
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-sm-12">
                            <img src="{{link}}" class="img-responsive" alt="User Photo">
                        </div>
                        <div class="col-sm-6">
                            <h1>
                                {{User.FirstName}} <span class="semi-bold">{{User.LastName}}</span>
                                <br>
                                <small> {{User.RoleName}}</small>
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-9">
                <div class="row">
                    <div class="col-sm-12 col-md-12">
                        <div class="well well-light well-sm no-margin no-padding">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="padding-10">
                                        <ul class="nav nav-tabs tabs-pull-right">
                                            <li class="">
                                                <a href="#a1" data-toggle="tab">Log</a>
                                            </li>
                                            <li class="active">
                                                <a href="#a2" data-toggle="tab">Overview</a>
                                            </li>
                                            <li>
                                                <a href="#a3" data-toggle="tab">Account Settings</a>
                                            </li>
                                            <li class="pull-left">
                                                <span class="margin-top-10 display-inline"><i class="fa fa-rss text-success"></i> Activity</span>
                                            </li>
                                        </ul>

                                        <div class="tab-content">
                                            <div class="tab-pane fade" id="a1">
                                                <div class="row">
                                                    <div ng-repeat="log in UserLogs">
                                                        <div class="col-xs-2 col-sm-1">
                                                            <time datetime="2014-09-20" class="icon">
                                                                <strong>Jan</strong>
                                                                <span>10</span>
                                                            </time>
                                                        </div>

                                                        <div class="col-xs-10 col-sm-11">
                                                            <h6 class="no-margin"><a href="javascript:void(0);">Allice in Wonderland</a></h6>
                                                            <p>
                                                                Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi Nam eget dui.
                                                                Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero,
                                                                sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel.
                                                            </p>
                                                        </div>
                                                        <div class="col-sm-12">
                                                            <hr>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade in active" id="a2">
                                                <div class="panel panel-info no-margin-bottom">
                                                    <div class="panel-heading">
                                                        <h3 class="panel-title">{{User.FirstName}} {{User.LastName}}</h3>
                                                    </div>
                                                    <div class="panel-body">
                                                        <div class="row">
                                                            <div class=" col-md-12 col-lg-12 ">
                                                                <table class="table table-user-information">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>First Name:</td>
                                                                            <td>{{User.FirstName}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Last Name:</td>
                                                                            <td>{{User.LastName}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Role:</td>
                                                                            <td>{{User.RoleName}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Username:</td>
                                                                            <td>{{User.UserName}}</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="panel-footer">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="a3">
                                                <form class="form-horizontal" name="userform">
                                                    <div class="col-lg-12 col-sm-12 col-xs-12">
                                                        <div class="widget flat radius-bordered">
                                                            <div class="widget-body" style="padding-top:10px;">
                                                                <div class="widget-main ">
                                                                    <div class="tabbable">
                                                                        <ul class="nav nav-tabs tabs-flat" id="myTab11">
                                                                            <li class="active">
                                                                                <a data-toggle="tab" href="#basic" aria-expanded="false">
                                                                                    Basic Information
                                                                                </a>
                                                                            </li>
                                                                            <li class="" ng-hide="User.IsPasswordchange">
                                                                                <a data-toggle="tab" href="#changepassword" aria-expanded="true">
                                                                                    Change Password
                                                                                </a>
                                                                            </li>
                                                                            <li class="">
                                                                                <a data-toggle="tab" href="#defaults" aria-expanded="true">
                                                                                    Default Settings
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                        <div class="tab-content tabs-flat">
                                                                            <div id="basic" class="tab-pane active">
                                                                                <div class="container-fluid">
                                                                                    <div class="row" style="margin-top:15px;">
                                                                                        <div class="col-md-8">
                                                                                            <div class="col-xs-12" style="padding-bottom: 10px;">
                                                                                                <div class="col-sm-3 col-md-4">
                                                                                                    <label class="control-label">First Name:</label>
                                                                                                </div>
                                                                                                <div class="col-sm-9 col-md-8">
                                                                                                    <input type="text" name="firstName" class="form-control input-sm"
                                                                                                           placeholder="First Name" ng-model="User.FirstName">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-xs-12" style="padding-bottom: 10px;">
                                                                                                <div class="col-sm-3 col-md-4">
                                                                                                    <label class="control-label">Last Name:</label>
                                                                                                </div>
                                                                                                <div class="col-sm-9 col-md-8">
                                                                                                    <input type="text" name="lastName" class="form-control input-sm"
                                                                                                           placeholder="Last Name" ng-model="User.LastName">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-xs-12" style="padding-bottom: 10px;">
                                                                                                <div class="profile-userbuttons">
                                                                                                    <button type="button" class="btn btn-success btn-sm" ng-click="UpdateProfile()">Update</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-md-4">
                                                                                            <div class="col-md-12">
                                                                                                    <img ng-src="{{link}}" alt="" style="width: 100%!important; height: 150px;" class="img-thumbnail img-responsive">
                                                                                                    @(Html.Kendo().Upload().Name("profileImageattachments").Async(async => async.Save("SaveUserImageTemp", "SysProfile")
                                                                                                        .Remove("RemoveUserImagetemp", "SysProfile"))
                                                                                                        .Events(e => e.Success("ProfileImage_onSuccess"))
                                                                                                    )
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div id="changepassword" class="tab-pane" ng-hide="User.IsPasswordchange">
                                                                                <div class="container-fluid">
                                                                                    <ng-form name="ChangePasswordForm">
                                                                                        <div class="row" style="margin-top:15px;">
                                                                                            <div class="col-xs-12 col-sm-6 col-md-6">
                                                                                                <div class="col-xs-12" style="padding-bottom: 10px;">
                                                                                                    <div class="col-sm-5 col-md-5">
                                                                                                        <label class="control-label">Old Password:</label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-7 col-md-7">
                                                                                                        <input type="password" class="form-control input-sm"
                                                                                                               placeholder="Old Password" ng-model="User.UserPassword">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="col-xs-12" style="padding-bottom: 10px;">
                                                                                                    <div class="col-sm-5 col-md-5">
                                                                                                        <label class="control-label">New Password:</label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-7 col-md-7">
                                                                                                        <input type="password" class="form-control input-sm" name="new_password"
                                                                                                               placeholder="New Password" ng-model="User.NewPassword">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="col-xs-12" style="padding-bottom: 10px;">
                                                                                                    <div class="col-sm-5 col-md-5">
                                                                                                        <label class="control-label">Repeat New Password:</label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-7 col-md-7">
                                                                                                        <input type="password" class="form-control input-sm"
                                                                                                               placeholder="Repeat New Password" name="confirm_password"
                                                                                                               ng-model="User.RepeatedPassword">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <span ng-show="User.NewPassword != User.RepeatedPassword && User.NewPassword != '' && User.RepeatedPassword != ''" class="req">Password doesn't match. must be same!</span>
                                                                                                <div class="col-xs-12" style="padding-bottom: 10px;">
                                                                                                    <div class="profile-userbuttons">
                                                                                                        <button type="button"
                                                                                                                class="btn btn-success btn-sm"
                                                                                                                ng-disabled="User.NewPassword != User.RepeatedPassword && User.UserPassword!=''"
                                                                                                                ng-click="ChangePasswordClick()">
                                                                                                            Change Password
                                                                                                        </button>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </ng-form>
                                                                                </div>
                                                                            </div>
                                                                            <div id="defaults" class="tab-pane">
                                                                                <div class="container-fluid">
                                                                                    <div class="row padding-bottom-10" style="margin-top:15px;">
                                                                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                                                                            <div class="col-sm-3 col-md-4">
                                                                                                <label class="control-label">Company:</label>
                                                                                            </div>
                                                                                            <div class="col-sm-9 col-md-8">
                                                                                                <select class="form-control input-sm" ng-model="CompanyAccess.CompanyID" ng-change="ProfileCompanyChanged()">
                                                                                                    <option ng-repeat="company in Companies" value="{{company.CompanyID}}">{{company.CompanyName}}</option>
                                                                                                </select>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                                                                            <div class="col-sm-3 col-md-4">
                                                                                                <label class="control-label">Year :</label>
                                                                                            </div>
                                                                                            <div class="col-sm-9 col-md-8">
                                                                                                <select class="form-control input-sm" ng-model="CompanyAccess.YearCode">
                                                                                                    <option ng-repeat="year in Years" ng-selected="year.YearCode==CompanyAccess.YearCode" value="{{year.YearCode}}">{{year.YearName}}</option>
                                                                                                </select>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="row padding-bottom-10">
                                                                                        <div class="col-sm-6 col-md-6">
                                                                                            <div class="col-sm-3 col-md-4">
                                                                                                <label class="control-label">Type:</label>
                                                                                            </div>
                                                                                            <div class="col-sm-9 col-md-8">
                                                                                                <select class="form-control input-sm" ng-model="CompanyAccess.SOPTYPE">
                                                                                                    <option ng-repeat="type in SOPTypes" ng-selected="type.SOPTYPE==CompanyAccess.SOPTYPE" value="{{type.SOPTYPE}}">{{type.SOPTYPENAME}}</option>
                                                                                                </select>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-sm-6 col-md-6">
                                                                                            <div class="col-sm-3 col-md-4">
                                                                                                <label class="control-label">Setup Type:</label>
                                                                                            </div>
                                                                                            <div class="col-sm-9 col-md-8">
                                                                                                <div class="input-group">
                                                                                                    <input type="text" class="form-control input-sm"
                                                                                                           placeholder="Setup Type ID" readonly
                                                                                                           ng-model="CompanyAccess.SOPTypeSetupID" />
                                                                                                    <span class="input-group-btn">
                                                                                                        <button class="btn btn-default input-sm"
                                                                                                                ng-click="OpenkendoWindow('SOP_TypeSetup','PopUp',CompanyAccess,'')">
                                                                                                            <span class="glyphicon glyphicon-zoom-in"></span>
                                                                                                        </button>
                                                                                                    </span>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="row padding-bottom-10">
                                                                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                                                                            <div class="col-sm-3 col-md-4">
                                                                                                <label class="control-label">Currency:</label>
                                                                                            </div>
                                                                                            <div class="col-sm-9 col-md-8">
                                                                                                <div class="input-group">
                                                                                                    <input type="text" class="form-control input-sm"
                                                                                                           placeholder="Currency Code" readonly
                                                                                                           ng-model="CompanyAccess.CurrencyCode" />
                                                                                                    <span class="input-group-btn">
                                                                                                        <button class="btn btn-default input-sm" ng-click="OpenkendoWindow('GL_Currency', 'SinglePopUp')"><span class="glyphicon glyphicon-zoom-in"></span></button>
                                                                                                    </span>
                                                                                                    <span class="input-group-btn" ng-hide="CompanyAccess.CurrencyCode == undefined || CompanyAccess.CurrencyCode == ''">
                                                                                                        <button class="btn btn-default input-sm" ng-disabled="CompanyAccess.CurrencyCode == undefined || CompanyAccess.CurrencyCode == ''"
                                                                                                                ng-click="OpenkendoWindow('GL_ExchangeTable', 'PopUp', CompanyAccess, '')">
                                                                                                            <span ng-hide="CompanyAccess.ExchangeTableID == undefined || CompanyAccess.ExchangeTableID == ''">{{CompanyAccess.ExchangeTableID}}</span>
                                                                                                        </button>
                                                                                                    </span>
                                                                                                    <span class="input-group-btn" ng-hide="CompanyAccess.ExchangeTableID == undefined || CompanyAccess.ExchangeTableID == ''">
                                                                                                        <button class="btn btn-default input-sm" ng-disabled="CompanyAccess.CurrencyCode == undefined || CompanyAccess.CurrencyCode == '' || CompanyAccess.ExchangeTableID == undefined || CompanyAccess.ExchangeTableID == ''"
                                                                                                                ng-click="OpenkendoWindow('GL_ExchangeRate', 'PopUp', CompanyAccess, '')">
                                                                                                            <span ng-show="CompanyAccess.ExchangeRateID == undefined || CompanyAccess.ExchangeRateID == ''">Select Exchange Rate</span>
                                                                                                            <span ng-hide="CompanyAccess.ExchangeRateID == undefined || CompanyAccess.ExchangeRateID == ''">{{CompanyAccess.ExchangeRate}}</span>
                                                                                                        </button>
                                                                                                    </span>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                                                                            <div class="col-sm-3 col-md-4">
                                                                                                <label class="control-label">Site:</label>
                                                                                            </div>
                                                                                            <div class="col-sm-9 col-md-8">
                                                                                                <div class="input-group">
                                                                                                    <input type="text" class="form-control input-sm" readonly
                                                                                                           placeholder="Site ID" ng-model="CompanyAccess.SiteID" />
                                                                                                    <span class="input-group-btn">
                                                                                                        <button class="btn btn-default input-sm" ng-click="OpenkendoWindow('INV_Site','PopUp')"><span class="glyphicon glyphicon-zoom-in"></span></button>
                                                                                                    </span>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="row padding-bottom-10">
                                                                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                                                                            <div class="col-sm-3 col-md-4">
                                                                                                <label class="control-label">Checkbook:</label>
                                                                                            </div>
                                                                                            <div class="col-sm-9 col-md-8">
                                                                                                <div class="input-group">
                                                                                                    <input type="text" class="form-control input-sm" readonly
                                                                                                           placeholder="Checkbook Code"
                                                                                                           ng-model="CompanyAccess.CheckbookCode" />
                                                                                                    <span class="input-group-btn">
                                                                                                        <button class="btn btn-default input-sm" ng-click="OpenkendoWindow('GL_Checkbook','PopUpByCurrency',CompanyAccess.CurrencyCode,'')"><span class="glyphicon glyphicon-zoom-in"></span></button>
                                                                                                    </span>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="row">
                                                                                        <div class="profile-userbuttons">
                                                                                            <button type="button"
                                                                                                    class="btn btn-success btn-sm"
                                                                                                    ng-click="UpdateProfileDefaults()">
                                                                                                Update Settings
                                                                                            </button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="tab-pane fade" id="a4">
                                                <div class="widget flat radius-bordered">
                                                    <div class="widget-body" style="padding-top:10px;">
                                                        <div class="widget-main ">
                                                            <div class="alert alert-warning" role="alert" ng-repeat="log in UserLogs">
                                                                <p>
                                                                    <a><span class="label label-info">Login</span></a>
                                                                    | <i class="glyphicon glyphicon-user"></i> <a>{{User.UserName}}</a>
                                                                    | <i class="glyphicon glyphicon-calendar"></i> {{log.LoginDate | date:'medium'}}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>